{% extends 'base.html' %}

{% block title %}Головна | Моніторинг продажів{% endblock %}

{% block content %}
<h1>Моніторинг продажів додаткових товарів</h1>

<div style="display: flex; flex-wrap: wrap; gap: 20px; margin-bottom: 30px;">
    <div style="flex: 1; min-width: 200px; background-color: #f9f9f9; padding: 20px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
        <h3>Всього продажів</h3>
        <p style="font-size: 24px; font-weight: bold;">{{ total_sales }}</p>
    </div>
    
    <div style="flex: 1; min-width: 200px; background-color: #f9f9f9; padding: 20px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
        <h3>Загальний дохід</h3>
        <p style="font-size: 24px; font-weight: bold;">{{ total_revenue }} грн</p>
    </div>
    
    <div style="flex: 1; min-width: 200px; background-color: #f9f9f9; padding: 20px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
        <h3>Працівників</h3>
        <p style="font-size: 24px; font-weight: bold;">{{ employees_count }}</p>
    </div>
    
    <div style="flex: 1; min-width: 200px; background-color: #f9f9f9; padding: 20px; border-radius: 5px; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
        <h3>Товарів</h3>
        <p style="font-size: 24px; font-weight: bold;">{{ products_count }}</p>
    </div>
</div>

<h2>Останні продажі</h2>
<table>
    <thead>
        <tr>
            <th>Дата</th>
            <th>Працівник</th>
            <th>Товар</th>
            <th>Кількість</th>
            <th>Сума</th>
        </tr>
    </thead>
    <tbody>
        {% for sale in recent_sales %}
        <tr>
            <td>{{ sale.date|date:"d.m.Y H:i" }}</td>
            <td>{{ sale.employee }}</td>
            <td>{{ sale.product }}</td>
            <td>{{ sale.quantity }}</td>
            <td>{{ sale.total_price }} грн</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="5" style="text-align: center;">Немає даних про продажі</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

<p>
    <a href="{% url 'add_sale' %}" class="btn">Додати продаж</a>
    <a href="{% url 'sales_list' %}" class="btn" style="background-color: #2196F3;">Переглянути всі продажі</a>
    <a href="{% url 'leaderboard' %}" class="btn" style="background-color: #FF9800;">Таблиця лідерів</a>
</p>
{% endblock %}